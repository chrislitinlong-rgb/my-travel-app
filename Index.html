<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>2026 ä¸­æ­å·¡éŠ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        [v-cloak] { display: none !important; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #222;
            margin: 0; padding: 0; overflow: hidden;
            height: 100vh; height: 100dvh; width: 100vw;
            -webkit-tap-highlight-color: transparent;
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .map-container iframe { width: 100%; height: 100%; border: none; border-radius: 0.75rem; }
        .safe-top { padding-top: max(env(safe-area-inset-top), 20px); }
        .safe-bottom { padding-bottom: max(env(safe-area-inset-bottom), 20px); }
        #app {
            width: 100%; height: 100%; margin: 0 auto; position: relative;
            background-color: transparent; overflow: hidden; display: flex; flex-direction: column;
        }
        @media (min-width: 640px) {
            #app { max-width: 400px; height: 90vh; margin-top: 5vh; border-radius: 40px; border: 8px solid #333; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
            body { background-color: #111; display: flex; justify-content: center; align-items: center; }
        }
    </style>
</head>
<body>
    <div id="app" class="text-gray-800" v-cloak>
        
        <div class="absolute inset-0 z-0">
            <img src="https://thumbs.dreamstime.com/b/christmas-winter-prague-czech-republic-snowfall-view-old-picturesque-urban-evening-landscape-lighting-street-lamps-134984723.jpg" 
                 alt="Winter Tram" 
                 class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-b from-black/50 via-white/20 to-white/95"></div>
        </div>

        <div class="relative z-10 px-5 flex justify-between items-start safe-top pt-4">
            <div>
                <h1 class="text-2xl font-bold text-white tracking-wider drop-shadow-md shadow-black">2026 ä¸­æ­å·¡éŠ</h1>
                <p class="text-[10px] font-bold mt-1 inline-block px-2 py-1 rounded-md backdrop-blur-md bg-black/40 text-white/90 border border-white/20">
                    <i class="fas fa-calendar-alt mr-1"></i> 2æœˆ2æ—¥ - 2æœˆ10æ—¥
                </p>
            </div>
            <div class="flex flex-col items-end text-[10px] font-bold px-3 py-1.5 rounded-xl backdrop-blur-xl bg-white/90 shadow-lg">
                <div class="mb-0.5 text-gray-800"><span class="text-blue-700 text-xs">CZK</span> â‰ˆ {{ rates.CZK_HKD }} HKD</div>
                <div class="text-gray-800"><span class="text-red-700 text-xs">PLN</span> â‰ˆ {{ rates.PLN_HKD }} HKD</div>
            </div>
        </div>

        <div class="relative z-10 flex-1 overflow-y-auto scrollbar-hide pb-24 px-4 pt-4" ref="mainContent">
            <div v-if="currentTab === 'schedule'" class="animate-fade-in pb-24">
                <div class="flex overflow-x-auto space-x-2 pb-2 scrollbar-hide snap-x">
                    <div v-for="(day, index) in dates" :key="index" @click="selectDate(index)"
                         class="snap-center flex-shrink-0 w-14 h-18 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border"
                         :class="selectedDateIndex === index ? 'bg-blue-600 text-white border-transparent scale-105 shadow-lg' : 'glass-card text-gray-700 border-white/40'">
                        <span class="text-[10px] font-medium opacity-80">Day {{ index + 1 }}</span>
                        <span class="text-lg font-bold">{{ day.date }}</span>
                        <span class="text-[9px] uppercase">{{ day.month }}</span>
                    </div>
                </div>
                <div class="glass-card rounded-xl p-3 mb-4 mt-2 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="bg-blue-100/80 text-blue-600 w-10 h-10 rounded-full flex items-center justify-center text-lg"><i :class="currentWeather.icon"></i></div>
                        <div class="relative">
                            <select v-model="selectedRegion" class="bg-transparent font-bold text-gray-800 text-base outline-none cursor-pointer appearance-none pr-5 w-full z-10 relative py-1">
                                <option v-for="(data, key) in weatherData" :key="key" :value="key">{{ data.name }}</option>
                            </select>
                            <i class="fas fa-caret-down absolute right-0 top-1.5 text-gray-500 z-0 text-xs pointer-events-none"></i>
                            <div class="text-[10px] text-gray-500 font-medium">å³æ™‚å¤©æ°£</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-gray-800">{{ currentWeather.temp }}Â°</div>
                        <div class="text-[10px] text-gray-500 font-medium">{{ currentWeather.desc }}</div>
                    </div>
                </div>
                <div class="flex justify-between items-center mb-3 px-1">
                    <h2 class="text-base font-bold text-gray-900 bg-white/70 backdrop-blur-md px-3 py-1 rounded-lg">{{ dates[selectedDateIndex].fullDate }}</h2>
                    <button @click="openModal('schedule')" class="bg-blue-600 active:bg-blue-700 text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-md flex items-center"><i class="fas fa-plus mr-1"></i> æ–°å¢</button>
                </div>
                <div class="space-y-3">
                    <div v-for="item in filteredItinerary" :key="item.id" class="relative group">
                        <div v-if="item.type === 'flight'" class="bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-2xl p-4 shadow-lg relative overflow-hidden">
                            <div class="absolute -right-2 -top-2 text-white/10"><i class="fas fa-plane text-7xl"></i></div>
                            <div class="flex justify-between items-start relative z-10">
                                <span class="bg-black/20 px-2 py-0.5 rounded text-[9px] font-bold tracking-wider border border-white/10">FLIGHT</span>
                                <div class="flex gap-3">
                                    <button @click="editItem(item)" class="text-white/90"><i class="fas fa-pen text-xs"></i></button>
                                    <button @click="deleteItem(item.id, 'schedule')" class="text-white/90"><i class="fas fa-trash text-xs"></i></button>
                                </div>
                            </div>
                            <div class="flex justify-between items-center mt-3 relative z-10">
                                <div class="text-center"><div class="text-2xl font-bold">{{ item.from }}</div><div class="text-[10px] opacity-80">{{ item.startTime }}</div></div>
                                <div class="flex-1 px-2 flex flex-col items-center"><i class="fas fa-plane text-lg mb-1 transform rotate-45"></i><div class="w-full h-px bg-white/30 border-t border-dashed border-white/50"></div><div class="text-[9px] mt-1 opacity-80">{{ item.duration }}</div></div>
                                <div class="text-center"><div class="text-2xl font-bold">{{ item.to }}</div><div class="text-[10px] opacity-80">{{ item.endTime }}</div></div>
                            </div>
                        </div>
                        <div v-else class="glass-card rounded-xl p-3 shadow-sm flex gap-3 items-start relative">
                            <div class="flex flex-col items-center min-w-[45px] pt-1"><span class="text-sm font-bold text-gray-800">{{ item.startTime }}</span><div class="h-full w-0.5 bg-gray-300/50 my-1 rounded-full"></div></div>
                            <div class="flex-1 pb-1">
                                <div class="flex justify-between items-start">
                                    <div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full flex items-center justify-center text-[10px] text-white shadow-sm shrink-0" :class="getTypeColor(item.type)"><i :class="getTypeIcon(item.type)"></i></div><h3 class="text-sm font-bold text-gray-800 leading-tight">{{ item.title }}</h3></div>
                                    <div class="flex gap-3 text-gray-400 text-xs pl-2"><button @click="editItem(item)"><i class="fas fa-pen"></i></button><button @click="deleteItem(item.id, 'schedule')"><i class="fas fa-trash"></i></button></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2 pl-8 flex items-center gap-1" v-if="item.location"><i class="fas fa-map-marker-alt text-red-500"></i> <span class="underline decoration-dotted cursor-pointer" @click="jumpToMap(item.location)">{{ item.location }}</span></p>
                            </div>
                        </div>
                    </div>
                    <div v-if="filteredItinerary.length === 0" class="flex flex-col items-center justify-center py-10 opacity-60"><i class="fas fa-calendar-plus text-2xl text-gray-500 mb-2"></i><p class="text-gray-600 text-sm">ä»Šå¤©æš«ç„¡è¡Œç¨‹</p></div>
                </div>
            </div>
            <div v-if="currentTab === 'map'" class="animate-fade-in flex flex-col h-full pb-24 pt-2">
                <div class="flex-none mb-3">
                    <h2 class="text-sm font-bold mb-2 px-1 text-gray-800">å¿«é€Ÿå°èˆª</h2>
                    <div class="flex overflow-x-auto space-x-2 pb-2 scrollbar-hide px-1">
                        <div v-for="loc in savedLocations" :key="loc.name" @click="currentMapQuery = loc.query" class="flex-shrink-0 glass-card px-3 py-2 rounded-lg flex items-center gap-2 cursor-pointer border active:bg-blue-50 transition" :class="currentMapQuery === loc.query ? 'border-blue-500 ring-1 ring-blue-300' : 'border-white/50'">
                            <i :class="loc.icon" class="text-blue-500 text-xs"></i><div class="font-bold text-xs text-gray-800">{{ loc.name }}</div>
                        </div>
                    </div>
                </div>
                <div class="flex-1 glass-card rounded-xl p-1 shadow-inner relative map-container overflow-hidden bg-white/80"><iframe :src="mapEmbedUrl" loading="lazy" allowfullscreen></iframe></div>
            </div>
            <div v-if="currentTab === 'accounting'" class="animate-fade-in pb-24">
                <div class="bg-gray-900 text-white rounded-3xl p-6 shadow-2xl mb-5 mt-2 relative overflow-hidden">
                    <div class="absolute -right-5 -top-5 w-32 h-32 bg-blue-600/40 rounded-full blur-3xl"></div><div class="absolute -left-5 -bottom-5 w-32 h-32 bg-purple-600/40 rounded-full blur-3xl"></div>
                    <div class="relative z-10 text-center"><p class="text-gray-400 text-[10px] font-bold uppercase tracking-widest mb-1">ç¸½æ”¯å‡º (HKD)</p><h2 class="text-3xl font-bold tracking-tight text-white mb-4">$ {{ totalExpenseHKD }}</h2>
                        <div class="bg-white/10 rounded-xl p-2 flex justify-between gap-0 backdrop-blur-md border border-white/5"><div class="w-1/2 text-center border-r border-white/10"><span class="block text-gray-400 text-[9px] mb-0.5">ç¾é‡‘</span><span class="font-bold text-sm">$ {{ totalCash }}</span></div><div class="w-1/2 text-center"><span class="block text-gray-400 text-[9px] mb-0.5">ä¿¡ç”¨å¡</span><span class="font-bold text-sm">$ {{ totalCard }}</span></div></div>
                    </div>
                </div>
                <div class="flex justify-between items-center mb-3 px-1"><h3 class="font-bold text-gray-800 text-sm">æ”¯å‡ºæ˜ç´°</h3><button @click="openModal('expense')" class="bg-blue-600 text-white text-xs px-3 py-1.5 rounded-full shadow font-bold"><i class="fas fa-plus mr-1"></i> è¨˜ä¸€ç­†</button></div>
                <div class="space-y-3">
                    <div v-for="exp in expenses" :key="exp.id" class="glass-card rounded-xl p-3 flex justify-between items-center shadow-sm border-l-[4px]" :class="exp.method === 'cash' ? 'border-l-green-400' : 'border-l-purple-400'">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center text-sm shadow-sm" :class="getCategoryColor(exp.category)"><i :class="getCategoryIcon(exp.category)"></i></div><div><div class="font-bold text-gray-800 text-sm">{{ exp.note }}</div><div class="text-[10px] text-gray-500 flex items-center gap-1"><span class="bg-black/5 px-1 rounded">{{ exp.date }}</span><span>{{ exp.method === 'cash' ? 'ç¾é‡‘' : 'ä¿¡ç”¨å¡' }}</span></div></div></div>
                        <div class="text-right"><div class="font-bold text-gray-900 text-sm">- {{ exp.currency }} {{ exp.amount }}</div><div class="text-[10px] text-gray-500 font-medium">â‰ˆ HKD {{ calculateToHKD(exp.amount, exp.currency) }}</div></div><button @click="deleteItem(exp.id, 'expense')" class="ml-2 text-gray-300 p-1"><i class="fas fa-times-circle"></i></button>
                    </div>
                </div>
            </div>
            <div v-if="currentTab === 'shopping'" class="animate-fade-in pb-24">
                <div class="flex justify-between items-center mb-4 mt-2 px-1"><h2 class="text-base font-bold text-gray-800">è³¼ç‰©æ¸…å–®</h2><button @click="openModal('shopping')" class="bg-orange-500 text-white text-xs px-3 py-1.5 rounded-full shadow font-bold"><i class="fas fa-plus mr-1"></i> æ–°å¢</button></div>
                <div class="glass-card rounded-xl p-2 shadow-sm">
                    <div v-for="item in shoppingList" :key="item.id" class="flex items-center justify-between p-3 border-b border-gray-100/50 last:border-0 active:bg-white/40 transition rounded-lg">
                        <div class="flex items-center gap-3 cursor-pointer flex-1" @click="toggleCheck(item)"><div class="w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all duration-200" :class="item.checked ? 'bg-green-500 border-green-500' : 'border-gray-300 bg-white'"><i v-if="item.checked" class="fas fa-check text-white text-[10px]"></i></div><span class="text-sm transition-all duration-200" :class="{'line-through text-gray-400': item.checked, 'text-gray-800 font-bold': !item.checked}">{{ item.name }}</span></div><button @click="deleteItem(item.id, 'shopping')" class="text-gray-300 px-2 py-1"><i class="fas fa-trash-alt"></i></button>
                    </div>
                </div>
            </div>
            <div v-if="currentTab === 'info'" class="animate-fade-in pt-2 space-y-3 pb-24">
                <div class="glass-card rounded-xl p-4 shadow-sm"><h3 class="font-bold text-blue-700 mb-2 border-b border-blue-100 pb-2 flex items-center text-base"><span class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center mr-2 text-xs"><i class="fas fa-flag"></i></span> æ·å…‹ (å¸ƒæ‹‰æ ¼)</h3><div class="grid grid-cols-2 gap-y-3 gap-x-4 text-xs"><div><span class="block text-gray-400 text-[10px] mb-0.5">è²¨å¹£</span><span class="font-bold text-gray-800">æ·å…‹å…‹æœ— (CZK)</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">é›»å£“</span><span class="font-bold text-gray-800">230V (æ­è¦é›™åœ“å­”)</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">ç·Šæ€¥é›»è©±</span><span class="font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded">112</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">æ™‚å·®</span><span class="font-bold text-gray-800">æ…¢é¦™æ¸¯ 7 å°æ™‚</span></div></div></div>
                <div class="glass-card rounded-xl p-4 shadow-sm"><h3 class="font-bold text-red-700 mb-2 border-b border-red-100 pb-2 flex items-center text-base"><span class="w-6 h-6 rounded-full bg-red-100 flex items-center justify-center mr-2 text-xs"><i class="fas fa-flag"></i></span> æ³¢è˜­</h3><div class="grid grid-cols-2 gap-y-3 gap-x-4 text-xs"><div><span class="block text-gray-400 text-[10px] mb-0.5">è²¨å¹£</span><span class="font-bold text-gray-800">æ³¢è˜­èŒ²ç¾…æ (PLN)</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">é›»å£“</span><span class="font-bold text-gray-800">230V (æ­è¦é›™åœ“å­”)</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">ç·Šæ€¥é›»è©±</span><span class="font-bold text-red-500 bg-red-50 px-1.5 py-0.5 rounded">112 / 997</span></div><div><span class="block text-gray-400 text-[10px] mb-0.5">æ™‚å·®</span><span class="font-bold text-gray-800">æ…¢é¦™æ¸¯ 7 å°æ™‚</span></div></div></div>
            </div>
        </div>
        <div class="absolute bottom-0 w-full bg-white/90 backdrop-blur-xl border-t border-gray-200 pb-safe pt-1 px-4 z-50 rounded-t-2xl">
            <div class="flex justify-between items-center h-14 safe-bottom max-w-sm mx-auto">
                <button v-for="tab in tabs" :key="tab.id" @click="currentTab = tab.id" class="flex flex-col items-center justify-center w-12 h-full transition-all duration-300 relative group">
                    <div class="absolute top-1.5 w-8 h-8 bg-blue-100 rounded-lg scale-0 transition-transform duration-200 ease-out" :class="{'scale-100': currentTab === tab.id}"></div>
                    <i :class="[tab.icon, currentTab === tab.id ? 'text-blue-600 -translate-y-1' : 'text-gray-400']" class="text-lg relative z-10 transition-transform duration-200"></i>
                    <span class="text-[9px] absolute bottom-1 font-bold transition-all duration-200" :class="currentTab === tab.id ? 'text-blue-600 opacity-100 translate-y-0' : 'text-gray-400 opacity-0 translate-y-2'">{{ tab.name }}</span>
                </button>
            </div>
        </div>
        <div v-if="showModal" class="absolute inset-0 z-[60] bg-black/60 backdrop-blur-[2px] flex items-end sm:items-center justify-center">
            <div class="absolute inset-0" @click="closeModal"></div>
            <div class="bg-gray-50 w-full sm:w-[90%] rounded-t-2xl sm:rounded-2xl p-5 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto relative z-10 pb-safe">
                <div class="flex justify-between items-center mb-5"><h3 class="text-lg font-bold text-gray-900">{{ modalTitle }}</h3><button @click="closeModal" class="text-gray-400 w-8 h-8 flex items-center justify-center rounded-full bg-gray-200/50"><i class="fas fa-times text-sm"></i></button></div>
                <div v-if="modalType === 'schedule'" class="space-y-4">
                    <div><label class="block text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wide">é¡å‹</label><select v-model="form.type" class="w-full bg-white p-3 rounded-xl border border-gray-200 outline-none text-sm font-bold text-gray-700"><option value="normal">ğŸ‘Ÿ ä¸€èˆ¬è¡Œç¨‹</option><option value="sightseeing">ğŸ“¸ æ™¯é»è§€å…‰</option><option value="food">ğŸ½ï¸ é¤å»³ç¾é£Ÿ</option><option value="flight">âœˆï¸ èˆªç­</option></select></div>
                    <div v-if="form.type === 'flight'" class="grid grid-cols-2 gap-3"><input v-model="form.from" placeholder="å‡ºç™¼åœ°" class="bg-white p-3 rounded-xl border border-gray-200 w-full text-sm"><input v-model="form.to" placeholder="ç›®çš„åœ°" class="bg-white p-3 rounded-xl border border-gray-200 w-full text-sm"><div class="col-span-2 flex gap-3"><input type="time" v-model="form.startTime" class="bg-white p-3 rounded-xl border border-gray-200 w-full text-sm text-center"><input type="time" v-model="form.endTime" class="bg-white p-3 rounded-xl border border-gray-200 w-full text-sm text-center"></div><input v-model="form.note" placeholder="èˆªç­è™Ÿç¢¼" class="col-span-2 bg-white p-3 rounded-xl border border-gray-200 w-full text-sm"></div>
                    <div v-else class="space-y-3"><input v-model="form.title" placeholder="åç¨± (å¦‚: æŸ¥ç†å¤§æ©‹)" class="w-full bg-white p-3 rounded-xl border border-gray-200 font-bold text-gray-800 text-sm"><input type="time" v-model="form.startTime" class="w-full bg-white p-3 rounded-xl border border-gray-200 text-sm"><input v-model="form.location" placeholder="åœ°é»" class="w-full bg-white p-3 rounded-xl border border-gray-200 text-sm"><textarea v-model="form.note" placeholder="å‚™è¨»" class="w-full bg-white p-3 rounded-xl border border-gray-200 h-20 resize-none text-sm"></textarea></div>
                </div>
                <div v-if="modalType === 'expense'" class="space-y-4"><div class="grid grid-cols-2 gap-3"><select v-model="form.method" class="bg-white p-3 rounded-xl border border-gray-200 text-sm"><option value="cash">ğŸ’µ ç¾é‡‘</option><option value="card">ğŸ’³ ä¿¡ç”¨å¡</option></select><select v-model="form.currency" class="bg-white p-3 rounded-xl border border-gray-200 font-bold text-sm"><option value="CZK">CZK</option><option value="PLN">PLN</option><option value="HKD">HKD</option></select></div><input type="number" v-model="form.amount" placeholder="0.00" class="w-full bg-white p-4 rounded-xl border border-gray-200 text-2xl font-bold text-center text-blue-600 outline-none"><select v-model="form.category" class="w-full bg-white p-3 rounded-xl border border-gray-200 text-sm"><option value="food">ğŸ´ é¤é£²</option><option value="transport">ğŸšŒ äº¤é€š</option><option value="shopping">ğŸ›ï¸ è³¼ç‰©</option><option value="other">ğŸ“ å…¶ä»–</option></select><input v-model="form.note" placeholder="å‚™è¨»" class="w-full bg-white p-3 rounded-xl border border-gray-200 text-sm"></div>
                <div v-if="modalType === 'shopping'" class="space-y-4"><input v-model="form.name" placeholder="è³¼è²·ç‰©å“åç¨±" class="w-full bg-white p-4 rounded-xl border border-gray-200 text-lg"></div>
                <button @click="saveItem" class="w-full bg-blue-600 text-white p-3.5 rounded-xl font-bold mt-6 shadow-lg">å„²å­˜</button><div class="h-4"></div>
            </div>
        </div>
    </div>
    <script>
        const { createApp, ref, computed, reactive } = Vue;
        createApp({
            setup() {
                const currentTab = ref('schedule'); const selectedDateIndex = ref(0); const showModal = ref(false); const modalType = ref(''); const isEditing = ref(false); const editingId = ref(null); const currentMapQuery = ref('Prague Old Town');
                const rates = reactive({ CZK_HKD: 0.33, PLN_HKD: 1.95 });
                const selectedRegion = ref('Prague');
                const weatherData = { 'Prague': { name: 'å¸ƒæ‹‰æ ¼', temp: 2, desc: 'å¤šé›²', icon: 'fas fa-cloud' }, 'Krakow': { name: 'å…‹æ‹‰ç§‘å¤«', temp: -3, desc: 'å°é›ª', icon: 'fas fa-snowflake' }, 'Wroclaw': { name: 'å¼—ç¾…èŒ¨ç“¦å¤«', temp: -1, desc: 'æ™´æ™‚å¤šé›²', icon: 'fas fa-cloud-sun' }, 'HK': { name: 'é¦™æ¸¯', temp: 18, desc: 'æ™´æœ—', icon: 'fas fa-sun' }, 'UK': { name: 'è‹±åœ‹', temp: 6, desc: 'æœ‰é›¨', icon: 'fas fa-cloud-rain' } };
                const currentWeather = computed(() => weatherData[selectedRegion.value]);
                const dates = Array.from({ length: 9 }, (_, i) => { const d = new Date(2026, 1, 2 + i); const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']; return { date: d.getDate(), month: 'Feb', fullDate: `2æœˆ${d.getDate()}æ—¥ (${weekDays[d.getDay()]})` }; });
                const itineraryItems = ref([{ id: 1, dateIndex: 0, type: 'flight', from: 'HKG', to: 'WAW', startTime: '23:05', endTime: '06:00(+1)', duration: '13h 55m', note: 'LO80 èˆªç­' }, { id: 2, dateIndex: 1, type: 'normal', title: 'å‰å¾€å¸‚å€', startTime: '07:00', location: 'Warsaw Chopin Airport', note: 'æ­ä¹˜ç«è»Š' }, { id: 3, dateIndex: 1, type: 'sightseeing', title: 'èˆŠåŸå»£å ´æ•£æ­¥', startTime: '10:00', location: 'Castle Square, Warsaw', note: 'æ‹ç…§æ‰“å¡' }, { id: 4, dateIndex: 1, type: 'food', title: 'æ³¢è˜­é¤ƒå­åˆé¤', startTime: '12:30', location: 'Zapiecek', note: 'å¿…åƒPierogi' }]);
                const expenses = ref([{ id: 1, amount: 50, currency: 'PLN', method: 'cash', category: 'food', note: 'æ©Ÿå ´å’–å•¡', date: '2/2' }]);
                const shoppingList = ref([{ id: 1, name: 'æ—…éŠä¿éšª', checked: true }, { id: 2, name: 'ç¶²å¡ (eSim)', checked: false }, { id: 3, name: 'æš–åŒ…/ç™¼ç†±è¡£', checked: false }]);
                const savedLocations = ref([{ name: 'å¸ƒæ‹‰æ ¼å»£å ´', query: 'Old Town Square, Prague', icon: 'fas fa-landmark' }, { name: 'å…‹æ‹‰ç§‘å¤«', query: 'KrakÃ³w Old Town', icon: 'fas fa-city' }, { name: 'æ©Ÿå ´', query: 'Warsaw Chopin Airport', icon: 'fas fa-plane' }, { name: 'é£¯åº—', query: 'Grand Hotel', icon: 'fas fa-bed' }]);
                const form = reactive({ type: 'normal', title: '', startTime: '', endTime: '', location: '', note: '', from: '', to: '', amount: '', currency: 'PLN', method: 'cash', category: 'food', name: '' });
                const tabs = [{ id: 'schedule', name: 'è¡Œç¨‹', icon: 'fas fa-calendar-alt' }, { id: 'map', name: 'åœ°åœ–', icon: 'fas fa-map-marked-alt' }, { id: 'accounting', name: 'è¨˜å¸³', icon: 'fas fa-wallet' }, { id: 'shopping', name: 'æ¸…å–®', icon: 'fas fa-check-square' }, { id: 'info', name: 'è³‡è¨Š', icon: 'fas fa-info-circle' }];
                const filteredItinerary = computed(() => itineraryItems.value.filter(item => item.dateIndex === selectedDateIndex.value).sort((a, b) => a.startTime.localeCompare(b.startTime)));
                const totalExpenseHKD = computed(() => { let total = 0; expenses.value.forEach(ex => { let rate = 1; if (ex.currency === 'CZK') rate = rates.CZK_HKD; if (ex.currency === 'PLN') rate = rates.PLN_HKD; total += ex.amount * rate; }); return total.toFixed(1); });
                const totalCash = computed(() => expenses.value.filter(e => e.method === 'cash').reduce((sum, e) => { let rate = 1; if (e.currency === 'CZK') rate = rates.CZK_HKD; if (e.currency === 'PLN') rate = rates.PLN_HKD; return sum + (e.amount * rate); }, 0).toFixed(0));
                const totalCard = computed(() => expenses.value.filter(e => e.method === 'card').reduce((sum, e) => { let rate = 1; if (e.currency === 'CZK') rate = rates.CZK_HKD; if (e.currency === 'PLN') rate = rates.PLN_HKD; return sum + (e.amount * rate); }, 0).toFixed(0));
                const modalTitle = computed(() => { if (modalType.value === 'schedule') return isEditing.value ? 'ç·¨è¼¯è¡Œç¨‹' : 'æ–°å¢è¡Œç¨‹'; if (modalType.value === 'expense') return 'è¨˜ä¸€ç­†'; if (modalType.value === 'shopping') return 'æ–°å¢è³¼ç‰©é …ç›®'; return ''; });
                const mapEmbedUrl = computed(() => `https://maps.google.com/maps?q=${encodeURIComponent(currentMapQuery.value)}&t=&z=14&ie=UTF8&iwloc=&output=embed`);
                const selectDate = (index) => selectedDateIndex.value = index;
                const calculateToHKD = (amount, currency) => { let rate = 1; if (currency === 'CZK') rate = rates.CZK_HKD; if (currency === 'PLN') rate = rates.PLN_HKD; return (amount * rate).toFixed(1); };
                const getCategoryIcon = (cat) => { const icons = { food: 'fas fa-utensils', transport: 'fas fa-bus', shopping: 'fas fa-shopping-bag', other: 'fas fa-ellipsis-h' }; return icons[cat] || icons.other; };
                const getCategoryColor = (cat) => { const colors = { food: 'bg-orange-100 text-orange-500', transport: 'bg-blue-100 text-blue-500', shopping: 'bg-purple-100 text-purple-500', other: 'bg-gray-100 text-gray-500' }; return colors[cat]; };
                const getTypeIcon = (type) => { const icons = { normal: 'fas fa-shoe-prints', sightseeing: 'fas fa-camera', food: 'fas fa-utensils', flight: 'fas fa-plane' }; return icons[type] || icons.normal; };
                const getTypeColor = (type) => { const colors = { normal: 'bg-gray-400', sightseeing: 'bg-red-400', food: 'bg-orange-400', flight: 'bg-blue-400' }; return colors[type]; };
                const jumpToMap = (location) => { currentMapQuery.value = location; currentTab.value = 'map'; };
                const toggleCheck = (item) => item.checked = !item.checked;
                const openModal = (type) => { modalType.value = type; isEditing.value = false; editingId.value = null; form.type = 'normal'; form.title = ''; form.startTime = ''; form.endTime = ''; form.location = ''; form.note = ''; form.from = ''; form.to = ''; form.amount = ''; form.currency = 'PLN'; form.method = 'cash'; form.category = 'food'; form.name = ''; showModal.value = true; };
                const closeModal = () => showModal.value = false;
                const editItem = (item) => { modalType.value = 'schedule'; isEditing.value = true; editingId.value = item.id; Object.assign(form, item); showModal.value = true; };
                const deleteItem = (id, type) => { if(!confirm('ç¢ºå®šè¦åˆªé™¤å—ï¼Ÿ')) return; if(type === 'schedule') itineraryItems.value = itineraryItems.value.filter(i => i.id !== id); if(type === 'expense') expenses.value = expenses.value.filter(i => i.id !== id); if(type === 'shopping') shoppingList.value = shoppingList.value.filter(i => i.id !== id); };
                const saveItem = () => { if(modalType.value === 'schedule') { const newItem = { id: isEditing.value ? editingId.value : Date.now(), dateIndex: selectedDateIndex.value, type: form.type, startTime: form.startTime, note: form.note }; if(form.type === 'flight') { newItem.from = form.from; newItem.to = form.to; newItem.endTime = form.endTime; newItem.duration = 'èˆªç­'; } else { newItem.title = form.title; newItem.location = form.location; } if(isEditing.value) { const index = itineraryItems.value.findIndex(i => i.id === editingId.value); itineraryItems.value[index] = { ...itineraryItems.value[index], ...newItem }; } else { itineraryItems.value.push(newItem); } } else if (modalType.value === 'expense') { expenses.value.push({ id: Date.now(), amount: parseFloat(form.amount), currency: form.currency, method: form.method, category: form.category, note: form.note, date: `${dates[selectedDateIndex.value].month}/${dates[selectedDateIndex.value].date}` }); } else if (modalType.value === 'shopping') { shoppingList.value.push({ id: Date.now(), name: form.name, checked: false }); } closeModal(); };
                return { currentTab, tabs, dates, selectedDateIndex, selectDate, itineraryItems, filteredItinerary, expenses, totalExpenseHKD, totalCash, totalCard, calculateToHKD, shoppingList, toggleCheck, showModal, modalType, openModal, closeModal, form, saveItem, rates, weatherData, selectedRegion, currentWeather, savedLocations, currentMapQuery, mapEmbedUrl, jumpToMap, editItem, deleteItem, modalTitle, getCategoryIcon, getCategoryColor, getTypeIcon, getTypeColor };
            }
        }).mount('#app');
    </script>
    <style>
        .animate-fade-in { animation: fadeIn 0.4s ease-out; } .animate-slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</body>
</html>